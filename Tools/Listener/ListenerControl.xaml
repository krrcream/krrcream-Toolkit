<UserControl
    x:Class="krrTools.Tools.Listener.ListenerControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Background="Transparent"
    mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <!--  Top Section with Instructions, Title, Hotkeys, and Button  -->
        <ui:TextBlock
            Grid.Row="0"
            Grid.Column="0"
            Margin="10,10,10,10"
            VerticalAlignment="Center"
            FontSize="16"
            Text="必须开启监听才能使用快捷键&#x0a;Listening must be enabled to use Hotkeys"
            TextWrapping="Wrap" />

        <!--  N2NC Hotkey Label  -->
        <ui:TextBlock
            Grid.Row="4"
            Grid.Column="1"
            HorizontalAlignment="Center"
            VerticalAlignment="Bottom"
            FontSize="16"
            Text="N2NC Hotkey"
            TextAlignment="Center" />

        <ui:TextBox
            x:Name="N2NCHotkeyTextBox"
            Grid.Row="3"
            Grid.Column="1"
            Margin="10,10,10,10"
            VerticalAlignment="Top"
            VerticalContentAlignment="Center"
            Background="Transparent"
            FontSize="16"
            IsReadOnly="True"
            Text="{Binding N2NCHotkey, Mode=TwoWay}"
            ToolTip="Click here and press key combination to set N2NC hotkey">
            <TextBox.Style>
                <Style TargetType="TextBox">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding N2NCHotkeyConflict.Value}" Value="True">
                            <Setter Property="BorderBrush" Value="Red" />
                            <Setter Property="BorderThickness" Value="2" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </ui:TextBox>

        <!--  DP Hotkey Label  -->
        <ui:TextBlock
            Grid.Row="6"
            Grid.Column="1"
            HorizontalAlignment="Center"
            VerticalAlignment="Bottom"
            FontSize="16"
            Text="DP Hotkey"
            TextAlignment="Center" />

        <ui:TextBox
            x:Name="DPHotkeyTextBox"
            Grid.Row="5"
            Grid.Column="1"
            Margin="10,10,10,10"
            VerticalAlignment="Top"
            VerticalContentAlignment="Center"
            Background="Transparent"
            FontSize="16"
            IsReadOnly="True"
            Text="{Binding DPHotkey, Mode=TwoWay}"
            ToolTip="Click here and press key combination to set DP hotkey">
            <TextBox.Style>
                <Style TargetType="TextBox">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding DPHotkeyConflict.Value}" Value="True">
                            <Setter Property="BorderBrush" Value="Red" />
                            <Setter Property="BorderThickness" Value="2" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </ui:TextBox>

        <!--  KRRLN Hotkey Label  -->
        <ui:TextBlock
            Grid.Row="8"
            Grid.Column="1"
            HorizontalAlignment="Center"
            VerticalAlignment="Top"
            FontSize="16"
            Text="KRRLN Hotkey"
            TextAlignment="Center" />

        <ui:TextBox
            x:Name="KRRLNHotkeyTextBox"
            Grid.Row="7"
            Grid.Column="1"
            Margin="10,10,10,10"
            VerticalAlignment="Top"
            VerticalContentAlignment="Center"
            Background="Transparent"
            FontSize="16"
            IsReadOnly="True"
            Text="{Binding KRRLNHotkey, Mode=TwoWay}"
            ToolTip="Click here and press key combination to set KRRLN hotkey">
            <TextBox.Style>
                <Style TargetType="TextBox">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding KRRLNHotkeyConflict.Value}" Value="True">
                            <Setter Property="BorderBrush" Value="Red" />
                            <Setter Property="BorderThickness" Value="2" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </ui:TextBox>

        <ui:Button
            Grid.Row="0"
            Grid.Column="1"
            Width="120"
            Height="40"
            Margin="10,10,10,10"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Click="TestN2NCButton_Click"
            Content="Test N2NC" />

        <!--  Songs Path Area  -->
        <ui:TextBlock
            Grid.Row="1"
            Grid.Column="0"
            FontSize="18"
            Text="{Binding SongsPath, Mode=TwoWay}" />
        <ui:Button
            Grid.Row="1"
            Grid.Column="1"
            Width="120"
            Height="40"
            Margin="10,10,10,10"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Command="{Binding BrowseCommand}"
            Content="Browse Songs" />

        <Image
            Grid.Row="0"
            Grid.Column="0"
            Source="{Binding BGPath}"
            Stretch="Uniform" />

        <!--  Current File Info  -->
        <GroupBox
            Grid.Row="2"
            Grid.RowSpan="7"
            Grid.Column="0"
            Margin="10,10,10,10"
            FontSize="18"
            Header="Current Beatmap Info">
            <ItemsControl
                x:Name="FileInfoContainer"
                Margin="10,10,10,10"
                ItemsSource="{Binding FileInfoItems}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <ui:TextBlock Margin="5,2,5,2" FontSize="18">
                            <ui:TextBlock.Text>
                                <MultiBinding StringFormat="{}{0}: {1}">
                                    <Binding Path="Key" />
                                    <Binding Path="Value" />
                                </MultiBinding>
                            </ui:TextBlock.Text>
                        </ui:TextBlock>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </GroupBox>
    </Grid>
</UserControl>