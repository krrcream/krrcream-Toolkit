<UserControl x:Class="krrTools.tools.Preview.DualPreviewControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" AllowDrop="True">
    <Border CornerRadius="6" Background="#FFFFFF" BorderBrush="#E0E0E0" BorderThickness="1" Padding="12">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Named so code-behind can append the loaded .osu filename -->
            <TextBlock x:Name="PreviewTitle" Grid.Row="0" Text="预览 / Preview" FontWeight="Bold" FontSize="15"/>

            <!-- Original -->
            <Border Grid.Row="1" x:Name="OriginalBorder" CornerRadius="4" Background="#FAFAFB" BorderBrush="#E2E5EA" BorderThickness="1" Padding="6" Margin="0,4,0,4"
                    AllowDrop="True" Drop="OnDrop" DragEnter="HighlightEnter" DragLeave="HighlightLeave" ClipToBounds="True">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <TextBlock x:Name="OriginalHint" Grid.Row="0" Text="原始预览 (Original)" Foreground="#333" HorizontalAlignment="Left" VerticalAlignment="Top" FontWeight="SemiBold" Margin="2,0,2,4"/>
                    <ContentControl x:Name="OriginalContent" Grid.Row="1" Visibility="Collapsed" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" />

                </Grid>
            </Border>

            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center">
                <TextBlock Text="↓ ↓" FontSize="18" Foreground="#5A6370"/>
            </StackPanel>

            <!-- Converted -->
            <Border Grid.Row="3" x:Name="ConvertedBorder" CornerRadius="4" Background="#FAFAFB" BorderBrush="#E2E5EA" BorderThickness="1" Padding="6" Margin="0,4,0,4"
                    AllowDrop="True" Drop="OnDrop" DragEnter="HighlightEnter" DragLeave="HighlightLeave" ClipToBounds="True">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <TextBlock x:Name="ConvertedHint" Grid.Row="0" Text="结果预览 (Converted)" Foreground="#333" HorizontalAlignment="Left" VerticalAlignment="Top" FontWeight="SemiBold" Margin="2,0,2,4"/>
                    <ContentControl x:Name="ConvertedContent" Grid.Row="1" Visibility="Collapsed" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" />
                </Grid>
            </Border>

            <!-- Drop Zone -->
            <Border Grid.Row="4" x:Name="DropZone" CornerRadius="6" Background="#F5F8FF" BorderBrush="#AFC8FF" BorderThickness="2" Padding="12" Margin="0,8,0,0"
                    AllowDrop="True" Drop="OnDrop" DragEnter="HighlightEnter" DragLeave="HighlightLeave">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock x:Name="DropHintCn" Text="将 .osu 文件拖到此区域" FontSize="13" Foreground="#3367B5" TextAlignment="Center"/>
                    <TextBlock x:Name="DropHintEn" Text="Drag &amp; Drop .osu files in here" FontSize="12" Foreground="#6A7A90" TextAlignment="Center"/>
                    <Button x:Name="StartConversionButton" Content="开始转换" Margin="8,10,8,0" 
                            Padding="8,6" Visibility="Collapsed" 
                            Click="StartConversionButton_Click" />
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</UserControl>
